---
name: Jason G.
surname: Wallace
position: "Associate Professor"
address: "Department of Crop & Soil Sciences, University of Georgia"
phone: +1-706-542-9696 
www: wallacelab.uga.edu
email: "jason.wallace@uga.edu"
#twitter: TheWallaceLab
github: jgwall
linkedin: "jason-wallace-a874b845"
date: "`r format(Sys.time(), '%B %Y')`"
output: vitae::hyndman       # Not bad, but a little ugly with title bar
header-includes:
  \definecolor{headcolor}{HTML}{000099}

# TODO: Can also use Bookdown to separate out sections. Not necessary as currently written, but would help if want to include plaint-text stuff somewhere.
---

```{r formatting, results="asis"}
cat("\\renewcommand{\\labelitemi}{\\textbullet}") # Reset bullets to round circles
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
library(vitae)
library(dplyr)
library(readr)

# Function to make sure any special characters are dealt with first
sanitize = function(tbl){
  tbl %>% mutate_all(dplR::latexify, doublebackslash = FALSE)
}

# Helper function to load a CSV and do routine tasks
load_data = function(infile){
  read_csv(infile, show_col_types=FALSE) %>% sanitize
}

# Helper function to bold text
bold = function(x){
  paste("\\textbf{", x, "}", sep="")
}

# Function to produce very basic table, no lines or headings - From Rob Hyndman, https://github.com/robjhyndman/CV
baretable <- function(tbl, digits = 0,
                      include.colnames = FALSE, include.rownames = FALSE,
                      hline.after = NULL, size = getOption("xtable.size", NULL),
                      add.to.row = getOption("xtable.add.to.row", NULL), longtable = FALSE,
                      ...) {
  xtable::xtable(tbl, digits = digits, ...) %>%
    print(
      include.colnames = include.colnames, include.rownames = include.rownames,
      hline.after = hline.after,  comment = FALSE,
      tabular.environment = if_else(longtable, "longtable", "tabular"),
      floating = FALSE, size = size, add.to.row = add.to.row,
      sanitize.text.function = function(x) {x}
    )
}


```


# Academic History
```{r header_info, results="asis"}
load_data("sources/0_header_info.csv") %>%
  mutate(info = bold(info)) %>%
  baretable()
```

## Education
```{r education, results="asis"}
load_data("sources/education.csv") %>%
  mutate(degree = bold(paste(degree, "\\textendash{}", location)), .keep="unused") %>%
  relocate(year, degree) %>%
  arrange(desc(year)) %>% # Arrange in descending order of Year
  baretable()
```

## Professional Experience
```{r employment, results="asis"}
load_data("sources/employment.csv") %>% 
  arrange(desc(stop)) %>%
  mutate(time=paste(start, "\\textendash{}", stop, sep=""),
         title=bold(title),
         location=paste(organization, " (", location, ")", sep=""), .keep="unused") %>%
  relocate(time, title) %>%
  baretable()
```


## Awards
```{r awards, results="asis"}
load_data("sources/awards.csv") %>%
  relocate(when) %>%
  #mutate(award=paste(bold(award), " (", sponsor, ")", sep=""), .keep="unused") %>%
  mutate(award=bold(award)) %>%
  baretable()
  
```

# Instruction

## Instructor of Record
```{r teaching_mine}
read.csv("sources/teaching_mine.csv")  %>% 
  mutate(class = paste(class, " (", credits, ifelse(credits==1, " credit", " credits"), ")", sep=""), .keep="unused") %>%
  detailed_entries(what=class, when=code, why=schedule)

# TODO: Test Baretable outline? I like the bullet points, how to keep?
```

## Guest Lectures
```{r teaching_guest}
# TODO: Start here. probably best to redo as a baretable()
read.csv("sources/teaching_guest.csv") %>%
  detailed_entries(when=class, what=title, with=date)
# detailed_entries(what=paste(title, "( in", class, ")"), when=date)

```

## Student Mentorship
```{r student_mentorship}
students = read.csv("sources/students.csv")

# Format segments
students$header = paste(students$role, " (", students$status, ")", sep="")
students$description = paste(students$name, " (", students$degree, " ", students$year, "; ",
                             students$department, ")", sep="")

students %>% detailed_entries(what=header, why=description)
```

```{r visitors}
visitors = read.csv("sources/visiting_scientists.csv")
visitors$description = paste(visitors$name, " (", visitors$role, ", ", visitors$from,
                             "; ", visitors$date, ")", sep="")
visitors %>% detailed_entries(what="Visiting Scientist", why=description)
```

# TODO: Undergraduates & high-schoolers

<!-- # Publications Note: Can use rcrossref package to retrieve citations via API -->

<!-- ```{r} -->
<!-- #library(dplyr) -->
<!-- #knitr::write_bib(c("vitae", "tibble"), "packages.bib") -->

<!-- #bibliography_entries("packages.bib") %>% -->
<!-- #  arrange(desc(author$family), issued) -->
<!-- ``` -->

